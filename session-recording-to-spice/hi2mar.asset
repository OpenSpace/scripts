local name = 'hi2mar2'

local pos = {
    Identifier = name .. '_pos',
    Parent = 'Sun',
    Transform = {
        Translation = {
            Type = "SpiceTranslation",
            Target = "-20010024",
            Observer = 'SUN',
            Frame = "J2000"
        }
    },
    GUI = {
        Path = '/SS7',
        Name = name .. " position"
    }
}

local trail2 = {
    Identifier = name .. '_trail2',
    Parent = "Earth",
    Renderable = {
        Type = "RenderableTrailTrajectory",
        Translation = {
            Type = "SpiceTranslation",
            Target = "-20010024",
            Observer = '399',
            Frame = "J2000"
        },
        Color = { 0.87, 0.0, 0.87 },
        StartTime = "2024 FEB 05 23:33:00.370",
        EndTime = "2024 FEB 05 23:35:30.064",
        SampleInterval = 1,
        EnableFade = false,
        ShowFullTrail = true,        
        TimeStampSubsampleFactor = 1
    },
    GUI = {
        Path = '/SS7',
        Name = name .. " trail2"
    }
}

local trail3 = {
    Identifier = name .. '_trail3',
    Parent = "Mars",
    Renderable = {
        Type = "RenderableTrailTrajectory",
        Translation = {
            Type = "SpiceTranslation",
            Target = "-20010024",
            Observer = '499',
            Frame = "J2000"
        },
        Color = { 0.3, 0.54, 0.2 },
        StartTime = "2024 FEB 05 23:33:00.370",
        EndTime = "2024 FEB 05 23:35:30.064",
        SampleInterval = 1,
        TimeStampSubsampleFactor = 1,
        EnableFade = false,
        ShowFullTrail = true
   },
    GUI = {
        Path = '/SS7',
        Name = name .. " trail3"
    }
}


local trail = {
    Identifier = name .. '_trail',
    Parent = "Sun",
    Renderable = {
        Type = "RenderableTrailTrajectory",
        Translation = {
            Type = "SpiceTranslation",
            Target = "-20010024",
            Observer = 'SUN',
            Frame = "J2000"
        },
        Color = { 0.9, 0.9, 0.0 },
        StartTime = "2024 FEB 05 23:33:00.370",
        EndTime = "2024 FEB 05 23:35:30.064",
        SampleInterval = 1,
        TimeStampSubsampleFactor = 1,
        EnableFade = false,
        ShowFullTrail = true
    },
    GUI = {
        Path = '/SS7',
        Name = name .. " trail"
    }
}


local kernel = asset.localResource(name .. '.osrectxt.bsp')

asset.onInitialize(function()
    openspace.spice.loadKernel(kernel)
    openspace.addSceneGraphNode(pos)
    openspace.addSceneGraphNode(trail)
    openspace.addSceneGraphNode(trail2)
    openspace.addSceneGraphNode(trail3)
end)

asset.onDeinitialize(function()
    openspace.removeSceneGraphNode(pos)
    openspace.removeSceneGraphNode(trail3)
    openspace.removeSceneGraphNode(trail2)
    openspace.removeSceneGraphNode(trail)
    openspace.spice.unloadKernel(kernel)
end)

  